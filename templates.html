<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Templates - Smart Board Admin</title>
    <link rel="icon" type="image/x-icon" href="logo/favicon.ico">
    <link rel="stylesheet" href="css/style.css">
    <script src="js/theme.js"></script>
    <script src="js/header.js"></script>
    <style>
        .template-toolbar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
            flex-wrap: wrap;
            margin-bottom: 1rem;
        }

        .lang-switch {
            display: inline-flex;
            align-items: center;
            gap: 0.35rem;
            padding: 0.25rem;
            border-radius: 999px;
            border: 1px solid rgba(107, 114, 128, 0.22);
            background: rgba(255, 255, 255, 0.85);
            box-shadow: var(--shadow);
        }

        :root[data-theme="dark"] .lang-switch {
            background: rgba(26, 31, 40, 0.92);
            border-color: #3a4861;
        }

        .lang-btn {
            border: none;
            background: transparent;
            color: var(--gray-700);
            font-weight: 800;
            font-size: 0.82rem;
            padding: 0.35rem 0.75rem;
            border-radius: 999px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        :root[data-theme="dark"] .lang-btn {
            color: #e6eaf2;
        }

        .lang-btn:hover {
            color: var(--primary);
        }

        .lang-btn.active {
            background: var(--primary);
            color: #ffffff;
        }

        .modal-lang-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .modal-lang-tab {
            border: 1px solid rgba(107, 114, 128, 0.22);
            background: rgba(255, 255, 255, 0.85);
            color: var(--gray-700);
            border-radius: 999px;
            padding: 0.4rem 0.85rem;
            font-weight: 800;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .modal-lang-tab.active {
            background: var(--primary);
            border-color: var(--primary);
            color: #ffffff;
        }

        :root[data-theme="dark"] .modal-lang-tab {
            background: rgba(26, 31, 40, 0.92);
            border-color: #3a4861;
            color: #e6eaf2;
        }

        :root[data-theme="dark"] .modal-lang-tab.active {
            background: var(--primary);
            border-color: var(--primary);
            color: #ffffff;
        }

        .modal-lang-panel {
            display: none;
        }

        .modal-lang-panel.active {
            display: block;
        }

        .template-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .template-stat {
            border: 1px solid rgba(107, 114, 128, 0.18);
            border-radius: var(--radius-lg);
            background: var(--card);
            padding: 0.9rem 1rem;
            box-shadow: var(--shadow);
        }

        .template-stat strong {
            font-size: 1.65rem;
            line-height: 1;
            color: var(--dark);
        }

        .template-stat p {
            margin-top: 0.3rem;
            color: var(--gray);
            font-size: 0.88rem;
        }

        .template-filters {
            display: flex;
            flex-wrap: wrap;
            gap: 0.55rem;
            margin-bottom: 1rem;
        }

        .template-filter-btn {
            border: 1px solid rgba(107, 114, 128, 0.2);
            background: #ffffff;
            color: var(--gray-700);
            border-radius: 999px;
            padding: 0.45rem 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .template-filter-btn:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        .template-filter-btn.active {
            background: var(--primary);
            border-color: var(--primary);
            color: #ffffff;
        }

        .templates-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 1rem;
        }

        .template-card {
            border: 1px solid rgba(107, 114, 128, 0.18);
            border-radius: var(--radius-lg);
            background: var(--card);
            box-shadow: var(--shadow);
            padding: 1rem;
            display: flex;
            flex-direction: column;
            gap: 0.65rem;
        }

        .template-head {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            gap: 1rem;
        }

        .template-head-left {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            min-width: 0;
        }

        .template-icon {
            width: 44px;
            height: 44px;
            border-radius: 12px;
            background: var(--primary-light);
            color: var(--primary);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            flex: 0 0 auto;
            border: 1px solid rgba(139, 30, 30, 0.2);
        }

        .template-icon svg {
            width: 22px;
            height: 22px;
        }

        .template-title-wrap {
            min-width: 0;
        }

        .template-title {
            font-size: 1.22rem;
            font-weight: 700;
            color: var(--dark);
            line-height: 1.2;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .template-category {
            margin-top: 0.35rem;
            display: inline-flex;
            align-items: center;
            border-radius: 999px;
            padding: 0.2rem 0.6rem;
            background: rgba(139, 30, 30, 0.12);
            color: var(--primary);
            font-size: 0.72rem;
            letter-spacing: 0.02em;
            font-weight: 700;
            text-transform: uppercase;
        }

        .template-description {
            color: var(--gray);
            font-size: 0.9rem;
            line-height: 1.35;
        }

        .template-snippet {
            border: 1px solid rgba(107, 114, 128, 0.18);
            background: #f8fafc;
            border-radius: 10px;
            padding: 0.75rem;
            font-size: 0.86rem;
            color: var(--gray-700);
            line-height: 1.4;
            min-height: 68px;
        }

        .template-footer {
            margin-top: auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 0.75rem;
            flex-wrap: wrap;
        }

        .template-priority {
            display: inline-flex;
            align-items: center;
            gap: 0.38rem;
            font-size: 0.82rem;
            color: var(--gray);
            font-weight: 600;
        }

        .template-dot {
            width: 8px;
            height: 8px;
            border-radius: 999px;
            background: var(--success);
        }

        .template-dot.emergency {
            background: var(--danger);
        }

        .template-actions {
            display: flex;
            gap: 0.45rem;
            flex-wrap: wrap;
        }

        .template-actions .btn {
            padding: 0.45rem 0.8rem;
        }

        .modal-grid-2 {
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 0.85rem;
        }

        #templatePublishModal {
            align-items: flex-start;
            overflow-y: auto;
            padding: var(--space-4) 0;
        }

        #templatePublishModal .modal {
            width: min(92vw, 760px);
            max-height: calc(100vh - (2 * var(--space-4)));
            overflow-y: auto;
            margin: 0 auto;
        }

        #templatePublishBoardsList {
            max-height: 240px;
            overflow-y: auto;
            padding-right: var(--space-1);
        }

        .template-publish-grid {
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 0.85rem;
        }

        .template-publish-option-card {
            border: 1px solid rgba(107, 114, 128, 0.22);
            border-radius: 12px;
            padding: 0.95rem;
            background: rgba(255, 255, 255, 0.82);
        }

        :root[data-theme="dark"] .template-publish-option-card {
            background: rgba(20, 25, 33, 0.86);
            border-color: #334155;
        }

        #templateNoticeBoardOptions {
            display: none;
            margin-top: 0.8rem;
            border: 1px solid rgba(107, 114, 128, 0.24);
            border-radius: 12px;
            padding: 0.95rem;
            background: rgba(248, 250, 252, 0.85);
        }

        :root[data-theme="dark"] #templateNoticeBoardOptions {
            background: rgba(17, 23, 33, 0.88);
            border-color: #334155;
        }

        .template-recurring-panel {
            display: none;
            margin-top: 0.8rem;
            border: 1px solid rgba(107, 114, 128, 0.24);
            border-radius: 12px;
            padding: 0.95rem;
            background: rgba(248, 250, 252, 0.85);
        }

        :root[data-theme="dark"] .template-recurring-panel {
            background: rgba(17, 23, 33, 0.88);
            border-color: #334155;
        }

        .template-day-selector {
            display: flex;
            gap: 0.45rem;
            flex-wrap: wrap;
        }

        .template-day-chip {
            display: inline-flex;
            align-items: center;
            gap: 0.32rem;
            padding: 0.45rem 0.7rem;
            border-radius: 8px;
            border: 1px solid rgba(107, 114, 128, 0.25);
            background: #eef1f5;
            font-size: 0.84rem;
            color: var(--gray-700);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .template-day-chip:hover {
            background: #e5e9ef;
        }

        .template-day-chip input {
            width: auto;
            margin: 0;
        }

        .template-day-chip:has(input:checked) {
            background: var(--primary);
            border-color: var(--primary);
            color: #fff;
        }

        :root[data-theme="dark"] .template-day-chip {
            background: #253045;
            border-color: #3a4861;
            color: #d7deea;
        }

        :root[data-theme="dark"] .template-day-chip:hover {
            background: #31425f;
        }

        :root[data-theme="dark"] .template-day-chip:has(input:checked) {
            background: var(--primary);
            border-color: var(--primary);
            color: #fff;
        }

        .notice-board-color-panel {
            margin-top: 0.45rem;
        }

        .notice-board-color-auto {
            border: 1px solid rgba(107, 114, 128, 0.28);
            border-radius: 8px;
            background: #fff;
            color: var(--gray-700);
            font-weight: 700;
            padding: 0.4rem 0.85rem;
            cursor: pointer;
            margin-bottom: 0.65rem;
            transition: all 0.2s ease;
        }

        .notice-board-color-auto.active {
            background: var(--primary);
            border-color: var(--primary);
            color: #fff;
        }

        :root[data-theme="dark"] .notice-board-color-auto {
            background: rgba(20, 25, 33, 0.92);
            color: #e6eaf2;
            border-color: #3a4861;
        }

        .notice-board-color-grid {
            display: grid;
            grid-template-columns: repeat(10, minmax(0, 1fr));
            gap: 0.5rem;
        }

        .notice-board-color-swatch {
            width: 100%;
            aspect-ratio: 1 / 1;
            border-radius: 8px;
            border: 2px solid rgba(255, 255, 255, 0.75);
            box-shadow: 0 0 0 1px rgba(107, 114, 128, 0.35);
            cursor: pointer;
            position: relative;
            transition: transform 0.15s ease, box-shadow 0.2s ease;
        }

        .notice-board-color-swatch:hover {
            transform: translateY(-1px);
        }

        .notice-board-color-swatch.active::after {
            content: '';
            position: absolute;
            inset: 4px;
            border: 2px solid #ffffff;
            border-radius: 5px;
            box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.35);
        }

        @media (max-width: 1100px) {
            .notice-board-color-grid {
                grid-template-columns: repeat(7, minmax(0, 1fr));
            }
        }

        @media (max-width: 900px) {
            .notice-board-color-grid {
                grid-template-columns: repeat(6, minmax(0, 1fr));
            }
        }

        @media (max-width: 900px) {
            .templates-grid {
                grid-template-columns: 1fr;
            }

            .modal-grid-2 {
                grid-template-columns: 1fr;
            }

            .template-publish-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <script src="js/auth.js"></script>
    <div class="app">
        <aside class="sidebar">
            <div class="logo">
                <img src="logo/Ves.png" alt="VES Logo" class="logo-img">
                <span class="logo-text">Smart<span>Board</span></span>
            </div>
            <nav class="nav">
                <a href="index.html" class="nav-item">
                    <span class="nav-icon"><svg viewBox="0 0 24 24">
                            <path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" />
                            <polyline points="9,22 9,12 15,12 15,22" />
                        </svg></span>
                    Dashboard
                </a>
                <a href="boards.html" class="nav-item">
                    <span class="nav-icon"><svg viewBox="0 0 24 24">
                            <rect x="2" y="3" width="20" height="14" rx="2" ry="2" />
                            <line x1="8" y1="21" x2="16" y2="21" />
                            <line x1="12" y1="17" x2="12" y2="21" />
                        </svg></span>
                    Boards
                </a>
                <a href="create-notice.html" class="nav-item">
                    <span class="nav-icon"><svg viewBox="0 0 24 24">
                            <path d="M12 20h9" />
                            <path d="M16.5 3.5a2.121 2.121 0 013 3L7 19l-4 1 1-4L16.5 3.5z" />
                        </svg></span>
                    Create Notice
                </a>
                <a href="groups.html" class="nav-item">
                    <span class="nav-icon"><svg viewBox="0 0 24 24">
                            <path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2" />
                            <circle cx="9" cy="7" r="4" />
                            <path d="M23 21v-2a4 4 0 00-3-3.87" />
                            <path d="M16 3.13a4 4 0 010 7.75" />
                        </svg></span>
                    Groups
                </a>
                <a href="schedules.html" class="nav-item">
                    <span class="nav-icon"><svg viewBox="0 0 24 24">
                            <rect x="3" y="4" width="18" height="18" rx="2" ry="2" />
                            <line x1="16" y1="2" x2="16" y2="6" />
                            <line x1="8" y1="2" x2="8" y2="6" />
                            <line x1="3" y1="10" x2="21" y2="10" />
                        </svg></span>
                    Schedules
                </a>
                <a href="media.html" class="nav-item">
                    <span class="nav-icon"><svg viewBox="0 0 24 24">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
                            <circle cx="8.5" cy="8.5" r="1.5" />
                            <polyline points="21,15 16,10 5,21" />
                        </svg></span>
                    Media Library
                </a>
                <a href="templates.html" class="nav-item active">
                    <span class="nav-icon"><svg viewBox="0 0 24 24">
                            <rect x="3" y="4" width="18" height="16" rx="2" />
                            <path d="M7 8h10" />
                            <path d="M7 12h10" />
                            <path d="M7 16h6" />
                        </svg></span>
                    Templates
                </a>
                <a href="quotes.html" class="nav-item">
                    <span class="nav-icon"><svg viewBox="0 0 24 24">
                            <path d="M6 10h12" />
                            <path d="M6 14h8" />
                            <path d="M8 6h8" />
                            <rect x="3" y="3" width="18" height="18" rx="2" />
                        </svg></span>
                    Quote Library
                </a>
                <a href="analytics.html" class="nav-item">
                    <span class="nav-icon"><svg viewBox="0 0 24 24">
                            <line x1="18" y1="20" x2="18" y2="10" />
                            <line x1="12" y1="20" x2="12" y2="4" />
                            <line x1="6" y1="20" x2="6" y2="14" />
                        </svg></span>
                    Analytics
                </a>
                <a href="audit-log.html" class="nav-item">
                    <span class="nav-icon"><svg viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="10" />
                            <path d="M12 6v6l4 2" />
                        </svg></span>
                    Audit Log
                </a>
                <a href="settings.html" class="nav-item">
                    <span class="nav-icon"><svg viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="3" />
                            <path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 01-2.83 2.83l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V22a2 2 0 01-4 0v-.09a1.65 1.65 0 00-1-1.51 1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H2a2 2 0 010-4h.09a1.65 1.65 0 001.51-1 1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 012.83-2.83l.06.06a1.65 1.65 0 001.82.33h.01a1.65 1.65 0 001-1.51V2a2 2 0 014 0v.09a1.65 1.65 0 001 1.51h.01a1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 2.83l-.06.06a1.65 1.65 0 00-.33 1.82v.01a1.65 1.65 0 001.51 1H22a2 2 0 010 4h-.09a1.65 1.65 0 00-1.51 1z" />
                        </svg></span>
                    Settings
                </a>
            </nav>
        </aside>

        <main class="main">
            <div class="page-header">
                <h1>Notice Templates</h1>
                <p>Pre-built marquee templates with editable title, content, and priority</p>
            </div>

            <div class="card">
                <div class="template-toolbar">
                    <div class="text-gray" id="tplHint">Select a template, update content if needed, and publish from this page.</div>
                    <div style="display:flex;align-items:center;gap:0.75rem;flex-wrap:wrap;justify-content:flex-end;">
                        <div class="lang-switch" role="group" aria-label="Template language">
                            <button type="button" class="lang-btn" data-lang="en" onclick="setTemplateLanguage('en')">EN</button>
                            <button type="button" class="lang-btn" data-lang="hi" onclick="setTemplateLanguage('hi')">हि</button>
                            <button type="button" class="lang-btn" data-lang="mr" onclick="setTemplateLanguage('mr')">मराठी</button>
                        </div>
                        <button type="button" class="btn btn-primary" onclick="openTemplateModal()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <line x1="12" y1="5" x2="12" y2="19" />
                            <line x1="5" y1="12" x2="19" y2="12" />
                        </svg>
                        <span id="addTemplateBtnLabel">Add Template</span>
                        </button>
                    </div>
                </div>

                <div class="template-stats">
                    <div class="template-stat">
                        <strong id="totalTemplates">0</strong>
                        <p id="labelTotalTemplates">Total Templates</p>
                    </div>
                    <div class="template-stat">
                        <strong id="totalCategories">0</strong>
                        <p id="labelCategories">Categories</p>
                    </div>
                    <div class="template-stat">
                        <strong id="emergencyTemplates">0</strong>
                        <p id="labelEmergencyTemplates">Emergency Templates</p>
                    </div>
                </div>

                <div id="categoryFilters" class="template-filters"></div>

                <div id="templatesGrid" class="templates-grid">
                    <div class="empty-state">
                        <div class="spinner"></div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <div class="modal-overlay" id="templateModal">
        <div class="modal" style="max-width: 700px;">
            <div class="modal-header">
                <h3 class="modal-title" id="templateModalTitle">Create Template</h3>
                <button class="modal-close" type="button" onclick="closeTemplateModal()">&times;</button>
            </div>
            <form id="templateForm">
                <div class="modal-grid-2">
                    <div class="form-group">
                        <label for="templateCategory" id="labelTemplateCategory">Category *</label>
                        <select id="templateCategory" required>
                            <option value="Academic" data-category="Academic">Academic</option>
                            <option value="Event" data-category="Event">Event</option>
                            <option value="Emergency" data-category="Emergency">Emergency</option>
                            <option value="Holiday" data-category="Holiday">Holiday</option>
                            <option value="Motivation" data-category="Motivation">Motivation</option>
                            <option value="General" data-category="General">General</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="templatePriority" id="labelTemplatePriority">Default Priority *</label>
                        <select id="templatePriority" required>
                            <option value="normal" data-priority="normal">Normal</option>
                            <option value="emergency" data-priority="emergency">Emergency</option>
                        </select>
                    </div>
                </div>

                <div class="modal-lang-tabs" id="templateModalLangTabs" aria-label="Template language tabs">
                    <button type="button" class="modal-lang-tab" data-lang="en" onclick="setTemplateModalLanguage('en')">EN</button>
                    <button type="button" class="modal-lang-tab" data-lang="hi" onclick="setTemplateModalLanguage('hi')">हि</button>
                    <button type="button" class="modal-lang-tab" data-lang="mr" onclick="setTemplateModalLanguage('mr')">मराठी</button>
                </div>

                <div class="modal-lang-panel" data-lang="en">
                    <div class="form-group">
                        <label for="templateName_en" id="labelTemplateName">Template Name *</label>
                        <input type="text" id="templateName_en">
                    </div>
                    <div class="form-group">
                        <label for="templateDescription_en" id="labelTemplateDescription">Short Description</label>
                        <input type="text" id="templateDescription_en" placeholder="One line summary for admin list">
                    </div>
                    <div class="form-group">
                        <label for="templateTitle_en" id="labelTemplateTitle">Default Notice Title *</label>
                        <input type="text" id="templateTitle_en">
                    </div>
                    <div class="form-group">
                        <label for="templateContent_en" id="labelTemplateContent">Default Marquee Content *</label>
                        <textarea id="templateContent_en"></textarea>
                    </div>
                </div>

                <div class="modal-lang-panel" data-lang="hi">
                    <div class="form-group">
                        <label for="templateName_hi">Template Name *</label>
                        <input type="text" id="templateName_hi">
                    </div>
                    <div class="form-group">
                        <label for="templateDescription_hi">Short Description</label>
                        <input type="text" id="templateDescription_hi" placeholder="One line summary for admin list">
                    </div>
                    <div class="form-group">
                        <label for="templateTitle_hi">Default Notice Title *</label>
                        <input type="text" id="templateTitle_hi">
                    </div>
                    <div class="form-group">
                        <label for="templateContent_hi">Default Marquee Content *</label>
                        <textarea id="templateContent_hi"></textarea>
                    </div>
                </div>

                <div class="modal-lang-panel" data-lang="mr">
                    <div class="form-group">
                        <label for="templateName_mr">Template Name *</label>
                        <input type="text" id="templateName_mr">
                    </div>
                    <div class="form-group">
                        <label for="templateDescription_mr">Short Description</label>
                        <input type="text" id="templateDescription_mr" placeholder="One line summary for admin list">
                    </div>
                    <div class="form-group">
                        <label for="templateTitle_mr">Default Notice Title *</label>
                        <input type="text" id="templateTitle_mr">
                    </div>
                    <div class="form-group">
                        <label for="templateContent_mr">Default Marquee Content *</label>
                        <textarea id="templateContent_mr"></textarea>
                    </div>
                </div>

                <div style="display:flex;justify-content:flex-end;gap:0.75rem;">
                    <button type="button" class="btn btn-secondary" onclick="closeTemplateModal()"><span id="btnCancelLabel">Cancel</span></button>
                    <button type="submit" class="btn btn-primary"><span id="btnSaveLabel">Save Template</span></button>
                </div>
            </form>
        </div>
    </div>

    <div class="modal-overlay" id="templatePublishModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Update & Publish Notice</h3>
                <button class="modal-close" type="button" onclick="closeTemplatePublishModal()">&times;</button>
            </div>
            <p class="text-gray mb-3">Selected Template: <strong id="templatePublishTemplateName">Template</strong></p>

            <form id="templatePublishForm">
                <div class="form-group">
                    <label for="templatePublishTitle">Notice Title *</label>
                    <input type="text" id="templatePublishTitle" required>
                </div>

                <div class="form-group">
                    <label for="templatePublishContent">Marquee Content *</label>
                    <textarea id="templatePublishContent" required></textarea>
                </div>

                <div class="template-publish-grid">
                    <div class="form-group">
                        <label for="templatePublishPriority">Priority *</label>
                        <select id="templatePublishPriority" required>
                            <option value="normal">Normal</option>
                            <option value="emergency">Emergency</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label style="display:flex;align-items:center;gap:0.5rem;">
                            <input type="checkbox" id="templatePublishSelectAll">
                            Select All Boards
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label>Select Target Boards</label>
                    <div class="board-select-grid" id="templatePublishBoardsList">
                        <p class="text-gray">Loading boards...</p>
                    </div>
                </div>

                <div class="form-group">
                    <label style="font-weight:600;">Overall Active Window *</label>
                    <small class="text-gray">Set the full date-time window when this notice is eligible to run.</small>
                </div>

                <div class="template-publish-grid">
                    <div class="form-group">
                        <label for="templatePublishStartTime">Start Date & Time *</label>
                        <input type="datetime-local" id="templatePublishStartTime" required>
                    </div>
                    <div class="form-group">
                        <label for="templatePublishEndTime">End Date & Time *</label>
                        <input type="datetime-local" id="templatePublishEndTime" required>
                        <small class="text-gray">Notice will stop showing after this time</small>
                    </div>
                </div>

                <div class="form-group mt-3">
                    <label style="display:flex;align-items:center;gap:0.55rem;font-weight:700;">
                        <input type="checkbox" id="templatePublishRecurring">
                        Enable Daily Recurring Schedule
                    </label>
                    <small class="text-gray">Use this for date range + daily time window + selected weekdays.</small>
                </div>

                <div id="templatePublishRecurringPanel" class="template-recurring-panel">
                    <div class="template-publish-grid">
                        <div class="form-group">
                            <label for="templatePublishRecurringStartDate">Recurring From Date *</label>
                            <input type="date" id="templatePublishRecurringStartDate">
                            <small class="text-gray">First day for recurring display</small>
                        </div>
                        <div class="form-group">
                            <label for="templatePublishRecurringEndDate">Recurring To Date *</label>
                            <input type="date" id="templatePublishRecurringEndDate">
                            <small class="text-gray">Last day for recurring display</small>
                        </div>
                    </div>
                    <div class="template-publish-grid">
                        <div class="form-group">
                            <label for="templatePublishDailyStartTime">Daily Start Time *</label>
                            <input type="time" id="templatePublishDailyStartTime" value="09:00">
                            <small class="text-gray">Show notice starting at this time each day</small>
                        </div>
                        <div class="form-group">
                            <label for="templatePublishDailyEndTime">Daily End Time *</label>
                            <input type="time" id="templatePublishDailyEndTime" value="17:00">
                            <small class="text-gray">Stop showing notice at this time each day</small>
                        </div>
                    </div>
                    <div class="form-group mt-2">
                        <label>Days of Week</label>
                        <div class="template-day-selector">
                            <label class="template-day-chip"><input type="checkbox" name="templatePublishRecurDays" value="0"> Sun</label>
                            <label class="template-day-chip"><input type="checkbox" name="templatePublishRecurDays" value="1" checked> Mon</label>
                            <label class="template-day-chip"><input type="checkbox" name="templatePublishRecurDays" value="2" checked> Tue</label>
                            <label class="template-day-chip"><input type="checkbox" name="templatePublishRecurDays" value="3" checked> Wed</label>
                            <label class="template-day-chip"><input type="checkbox" name="templatePublishRecurDays" value="4" checked> Thu</label>
                            <label class="template-day-chip"><input type="checkbox" name="templatePublishRecurDays" value="5" checked> Fri</label>
                            <label class="template-day-chip"><input type="checkbox" name="templatePublishRecurDays" value="6"> Sat</label>
                        </div>
                        <small class="text-gray">Notice will only show on selected days.</small>
                    </div>
                </div>

                <div class="template-publish-option-card">
                    <label style="display:flex;align-items:center;gap:0.55rem;font-weight:700;">
                        <input type="checkbox" id="templatePublishShowNoticeBoard">
                        Display this template as Notice Board in client app (optional)
                    </label>

                    <div id="templateNoticeBoardOptions">
                        <div class="template-publish-grid">
                            <div class="form-group">
                                <label for="templatePublishNoticeBoardImage">Notice Board Image (optional)</label>
                                <input type="file" id="templatePublishNoticeBoardImage" accept="image/*">
                                <small class="text-gray">If selected, image appears on one side and text aligns automatically.</small>
                            </div>
                            <div class="form-group">
                                <label>Top/Bottom Bar Color</label>
                                <div class="notice-board-color-panel">
                                    <button type="button" class="notice-board-color-auto active" id="templatePublishNoticeBoardColorAuto">Auto (Recommended)</button>
                                    <div class="notice-board-color-grid" id="templatePublishNoticeBoardColorGrid" aria-label="Notice board color palette">
                                        <!-- 19 color swatches injected by JS -->
                                    </div>
                                </div>
                                <small class="text-gray">Choose one of 19 predefined colors. If not selected, auto color is applied.</small>
                            </div>
                        </div>
                    </div>
                </div>

                <div style="display:flex;justify-content:flex-end;gap:0.75rem;">
                    <button type="button" class="btn btn-secondary" onclick="closeTemplatePublishModal()">Cancel</button>
                    <button type="submit" class="btn btn-success">Publish</button>
                </div>
            </form>
        </div>
    </div>

    <script src="js/config.js?v=20260211"></script>
    <script src="js/templates.js"></script>
    <script src="js/api.js"></script>
    <script src="js/templates-page.js"></script>
</body>

</html>
